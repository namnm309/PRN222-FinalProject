<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - PresentationLayer</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/PresentationLayer.styles.css" asp-append-version="true" />
</head>
<body>
    <header class="header-custom">
        <nav class="navbar-custom">
            <div class="header-container">
                <div class="header-left">
                    <a asp-page="/Index" class="header-logo-link">
                        <div class="logo-container">
                            <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 2L3 7V14C3 19.55 7.16 24.74 14 26C20.84 24.74 25 19.55 25 14V7L14 2Z" fill="#00A63E"/>
                                <path d="M12 8L8 14H13L11 20L20 9H15L17 8H12Z" fill="white"/>
                            </svg>
                        </div>
                        <div class="brand-container">
                            <div class="brand-title">EV Charging</div>
                            <div class="brand-subtitle">Management System</div>
                        </div>
                    </a>
                    
                    <!-- Navigation Menu -->
                    <nav class="header-nav">
                        <a asp-page="/Index" class="nav-link">Trang chủ</a>
                        <a href="#" class="nav-link">Tìm trạm sạc</a>
                        <a href="#" class="nav-link">Giá cả</a>
                        <a href="#" class="nav-link">Hỗ trợ</a>
                    </nav>
                </div>
                
                <!-- Mobile Menu Toggle Button -->
                <button class="mobile-menu-toggle" aria-label="Toggle menu">
                    <svg class="hamburger-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 12H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M3 6H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <svg class="close-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                
                <div class="header-right">
                    @if (User.Identity?.IsAuthenticated == true)
                    {
                        <!-- Dashboard Button -->
                        @if (User.IsInRole("CSStaff"))
                        {
                            <a asp-page="/Staff/Index" class="nav-link nav-link-dashboard">
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 6px;">
                                    <rect x="2" y="2" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                    <rect x="10" y="2" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                    <rect x="2" y="10" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                    <rect x="10" y="10" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Staff Dashboard
                            </a>
                        }
                        else if (User.IsInRole("Admin"))
                        {
                            <a asp-page="/Admin/Index" class="nav-link nav-link-dashboard">
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 6px;">
                                    <rect x="2" y="2" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                    <rect x="10" y="2" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                    <rect x="2" y="10" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                    <rect x="10" y="10" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Admin Dashboard
                            </a>
                        }
                        else if (User.IsInRole("EVDriver"))
                        {
                            <a asp-page="/Driver/Index" class="nav-link nav-link-dashboard">
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 6px;">
                                    <rect x="2" y="2" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                    <rect x="10" y="2" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                    <rect x="2" y="10" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                    <rect x="10" y="10" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                My Dashboard
                            </a>
                        }
                        
                        <!-- User Menu -->
                        <div class="header-user-menu">
                            <button class="btn-notification" title="Thông báo">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M10 2C7.24 2 5 4.24 5 7V11L3 14V15H17V14L15 11V7C15 4.24 12.76 2 10 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M8 15V16C8 17.1 8.9 18 10 18C11.1 18 12 17.1 12 16V15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <span class="notification-badge">3</span>
                            </button>
                            
                            <div class="user-dropdown">
                                <button type="button" class="user-profile-btn" id="userDropdownBtn">
                                    <div class="user-avatar">
                                        <span>@(User.Identity.Name != null && User.Identity.Name.Length > 0 ? User.Identity.Name.Substring(0, 1).ToUpper() : "U")</span>
                                    </div>
                                    <div class="user-info">
                                        <span class="user-name">@User.Identity.Name</span>
                                        <span class="user-role">
                                            @if (User.IsInRole("Admin"))
                                            {
                                                <text>Quản trị viên</text>
                                            }
                                            else if (User.IsInRole("CSStaff"))
                                            {
                                                <text>Nhân viên</text>
                                            }
                                            else if (User.IsInRole("EVDriver"))
                                            {
                                                <text>Người dùng</text>
                                            }
                                            else
                                            {
                                                <text>Người dùng</text>
                                            }
                                        </span>
                                    </div>
                                    <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                                <div class="dropdown-menu" id="userDropdownMenu">
                                    @if (User.IsInRole("CSStaff"))
                                    {
                                        <a asp-page="/Staff/Index" class="dropdown-item">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <rect x="2" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                                <rect x="9" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                                <rect x="2" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                                <rect x="9" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                            </svg>
                                            <span>Staff Dashboard</span>
                                        </a>
                                    }
                                    else if (User.IsInRole("Admin"))
                                    {
                                        <a asp-page="/Admin/Index" class="dropdown-item">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <rect x="2" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                                <rect x="9" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                                <rect x="2" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                                <rect x="9" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                            </svg>
                                            <span>Admin Dashboard</span>
                                        </a>
                                    }
                                    else if (User.IsInRole("EVDriver"))
                                    {
                                        <a asp-page="/Driver/Index" class="dropdown-item">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <rect x="2" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                                <rect x="9" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                                <rect x="2" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                                <rect x="9" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                            </svg>
                                            <span>My Dashboard</span>
                                        </a>
                                        <div class="dropdown-divider"></div>
                                    }
                                    
                                    <a asp-page="/Auth/EditProfile" class="dropdown-item">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M8 10C9.1 10 10 9.1 10 8C10 6.9 9.1 6 8 6C6.9 6 6 6.9 6 8C6 9.1 6.9 10 8 10Z" stroke="currentColor" stroke-width="1.5"/>
                                            <path d="M2 13C2 11.34 3.34 10 5 10H11C12.66 10 14 11.34 14 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                        </svg>
                                        <span>Chỉnh sửa thông tin cá nhân</span>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <form method="post" asp-page="/Auth/Logout" class="dropdown-item-form">
                                        <button type="submit" class="dropdown-item logout-item">
                                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M6 14H4C3.45 14 3 13.55 3 13V3C3 2.45 3.45 2 4 2H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                                <path d="M11 11L14 8L11 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M14 8H8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                            </svg>
                                            <span>Đăng xuất</span>
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    }
                    else
                    {
                        <a asp-page="/Auth/Login" class="btn-login">Đăng nhập</a>
                    }
                </div>
            </div>
            
            <!-- Mobile Menu -->
            <div class="mobile-menu">
                <nav class="mobile-nav">
                    <a asp-page="/Index" class="mobile-nav-link active">Trang chủ</a>
                    <a href="#" class="mobile-nav-link">Tìm trạm sạc</a>
                    <a href="#" class="mobile-nav-link">Giá cả</a>
                    <a href="#" class="mobile-nav-link">Hỗ trợ</a>
                    @if (User.Identity?.IsAuthenticated == true)
                    {
                        <div class="mobile-nav-divider"></div>
                        <a asp-page="/Auth/EditProfile" class="mobile-nav-link">
                            <svg width="20" height="20" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 10C9.1 10 10 9.1 10 8C10 6.9 9.1 6 8 6C6.9 6 6 6.9 6 8C6 9.1 6.9 10 8 10Z" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M2 13C2 11.34 3.34 10 5 10H11C12.66 10 14 11.34 14 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            <span>Hồ sơ của tôi</span>
                        </a>
                        <a href="#" class="mobile-nav-link">
                            <svg width="20" height="20" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 2V8M8 8L5 5M8 8L11 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M2 10C2 11.1 2.9 12 4 12H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            <span>Lịch sử sạc</span>
                        </a>
                        <a href="#" class="mobile-nav-link">
                            <svg width="20" height="20" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 14C11.31 14 14 11.31 14 8C14 4.69 11.31 2 8 2C4.69 2 2 4.69 2 8C2 11.31 4.69 14 8 14Z" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M8 5V8L10 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            <span>Cài đặt</span>
                        </a>
                        <form method="post" asp-page="/Auth/Logout" class="mobile-nav-form">
                            <button type="submit" class="mobile-nav-link mobile-nav-logout">
                                <svg width="20" height="20" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 14H4C3.45 14 3 13.55 3 13V3C3 2.45 3.45 2 4 2H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                    <path d="M11 11L14 8L11 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M14 8H8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                </svg>
                                <span>Đăng xuất</span>
                            </button>
                        </form>
                    }
                    else
                    {
                        <div class="mobile-nav-divider"></div>
                        <a asp-page="/Auth/Login" class="mobile-nav-link mobile-nav-login">Đăng nhập</a>
                    }
                </nav>
            </div>
        </nav>
    </header>
    <main role="main" class="main-content">
        @RenderBody()
    </main>

    <footer class="app-footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <div class="logo-container-footer">
                            <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 2L3 7V14C3 19.55 7.16 24.74 14 26C20.84 24.74 25 19.55 25 14V7L14 2Z" fill="#00A63E"/>
                                <path d="M12 8L8 14H13L11 20L20 9H15L17 8H12Z" fill="white"/>
                            </svg>
                        </div>
                        <div class="footer-brand">
                            <h3>EV Charging</h3>
                            <p>Management System</p>
                        </div>
                    </div>
                    <p class="footer-description">Hệ thống quản lý trạm sạc xe điện thông minh, giúp bạn tìm và sử dụng trạm sạc một cách tiện lợi nhất.</p>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-title">Liên kết nhanh</h4>
                    <ul class="footer-links">
                        <li><a asp-page="/Index">Trang chủ</a></li>
                        <li><a href="#">Tìm trạm sạc</a></li>
                        <li><a href="#">Về chúng tôi</a></li>
                        <li><a asp-page="/Privacy">Chính sách bảo mật</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-title">Hỗ trợ</h4>
                    <ul class="footer-links">
                        <li><a href="#">Câu hỏi thường gặp</a></li>
                        <li><a href="#">Hướng dẫn sử dụng</a></li>
                        <li><a href="#">Liên hệ</a></li>
                        <li><a href="#">Báo cáo sự cố</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-title">Liên hệ</h4>
                    <ul class="footer-contact">
                        <li>
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 2C5.24 2 3 4.24 3 7C3 10.5 8 14 8 14C8 14 13 10.5 13 7C13 4.24 10.76 2 8 2Z" stroke="currentColor" stroke-width="1.5"/>
                                <circle cx="8" cy="7" r="2" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                            <span>Hà Nội, Việt Nam</span>
                        </li>
                        <li>
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 3L6 3L8 6L6 8L8 12L13 8L13 3L14 3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            <span>support@evcharging.vn</span>
                        </li>
                        <li>
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 5L6 8L3 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M8 3L13 8L8 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            <span>+84 123 456 789</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 EV Charging Management System. Tất cả quyền được bảo lưu.</p>
            </div>
        </div>
    </footer>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>