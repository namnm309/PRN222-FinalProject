@page "/Driver/SessionDetail/{id:guid}"
@model PresentationLayer.Pages.Driver.SessionDetailModel
@{
    Layout = "~/Pages/Shared/_DashboardLayout.cshtml";
    ViewData["Title"] = "Driver • Chi tiết phiên sạc";
}

<section class="page-header">
    <h2>@ViewData["Title"]</h2>
</section>

<section class="content-grid">
    <!-- Session Info -->
    <div class="dashboard-panel">
        <div class="panel-header">
            <h3>Thông tin phiên sạc</h3>
        </div>
        <div class="panel-body" id="session-info">
            <div class="text-center text-muted">Đang tải...</div>
        </div>
    </div>

    <!-- Charging Gauges (Car Dashboard Style) -->
    <div class="dashboard-panel">
        <div class="panel-header">
            <h3>Tiến trình sạc</h3>
        </div>
        <div class="panel-body">
            <!-- Gauges Row - Side by Side -->
            <div class="gauges-row">
                <!-- Power Gauge - ChargingRing Component -->
                <div id="power-gauge-container" class="charging-ring-container"></div>

                <!-- SOC Gauge - ChargingRing Component -->
                <div id="soc-gauge-container" class="charging-ring-container"></div>
            </div>

            <!-- Stats and Actions Row -->
            <div class="stats-actions-row">
                <!-- Stats Row -->
                <div class="stats-row">
                    <div class="stat-box">
                        <div class="stat-label">Năng lượng đã sạc</div>
                        <div class="stat-value" id="energy-delivered">0 kWh</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Thời gian đã sạc</div>
                        <div class="stat-value" id="charging-time">00:00:00</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Chi phí hiện tại</div>
                        <div class="stat-value" id="current-cost">10,000 VND</div>
                    </div>
                </div>

                <!-- Actions -->
                <div class="actions-section" id="session-actions" style="display: none;">
                    <button id="btn-stop-charging" class="btn btn-warning btn-lg w-100 mb-2">Ngưng sạc</button>
                    <button id="btn-payment" class="btn btn-success btn-lg w-100" style="display: none;">Thanh toán</button>
                </div>
            </div>
        </div>
    </div>
</section>

<input type="hidden" id="session-id" value="@Model.Id" />

@section Scripts {
    <link rel="stylesheet" href="~/css/charging-ring.css" />
    <script src="~/js/charging-ring.js"></script>
    <script src="~/js/signalr-manager.js"></script>
    <script src="~/js/driver-session-detail.js"></script>
}

