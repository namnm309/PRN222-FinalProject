@page 
@{
    Layout = "~/Pages/Shared/_DashboardLayout.cshtml";
    ViewData["Title"] = "Admin • Tổng quan";
}

<section class="page-header">
    <h2>@ViewData["Title"]</h2>
</section>

<section class="filters dashboard-filters">
    <div class="filter-group">
        <label for="DashboardStationFilter">Trạm sạc</label>
        <select id="DashboardStationFilter" class="form-select" data-station-filter>
            <option value="">Tất cả trạm</option>
        </select>
    </div>
    <div class="filter-group">
        <label for="DashboardRange">Khoảng thời gian</label>
        <select id="DashboardRange" class="form-select" data-range-filter>
            <option value="today" selected>Hôm nay</option>
            <option value="yesterday">Hôm qua</option>
            <option value="7days">7 ngày gần nhất</option>
            <option value="30days">30 ngày</option>
        </select>
    </div>
</section>

<section class="kpis dashboard-kpis">
    <div class="kpi-card">
        <span class="kpi-title">Tổng điểm sạc</span>
        <span class="kpi-value" data-kpi="total-spots">--</span>
    </div>
    <div class="kpi-card">
        <span class="kpi-title">Đang trống</span>
        <span class="kpi-value" data-kpi="available-spots">--</span>
    </div>
    <div class="kpi-card">
        <span class="kpi-title">Phiên đang chạy</span>
        <span class="kpi-value" data-kpi="active-sessions">--</span>
    </div>
    <div class="kpi-card">
        <span class="kpi-title">Đặt chỗ hôm nay</span>
        <span class="kpi-value" data-kpi="reservations-today">--</span>
    </div>
    <div class="kpi-card">
        <span class="kpi-title">Năng lượng (kWh)</span>
        <span class="kpi-value" data-kpi="energy-today">--</span>
    </div>
    <div class="kpi-card">
        <span class="kpi-title">Doanh thu (VND)</span>
        <span class="kpi-value" data-kpi="revenue-today">--</span>
    </div>
</section>

<section class="content-grid">
    <div class="dashboard-panel">
        <div class="panel-header">
            <h3>Phiên sạc gần đây</h3>
            <button class="btn btn-sm btn-outline-primary" data-refresh-sessions>Tải lại</button>
        </div>
        <div class="chart-container" style="position: relative; height: 300px; padding: 1rem;">
            <canvas id="sessionsStatusChart" data-session-chart></canvas>
            <div data-session-chart-empty class="text-center text-muted" style="display: none; padding: 2rem;">
                Chưa có dữ liệu phiên sạc
            </div>
        </div>
    </div>
    <div class="dashboard-panel">
        <div class="panel-header">
            <h3>Lịch đặt chỗ sắp tới</h3>
            <button class="btn btn-sm btn-outline-primary" data-refresh-reservations>Tải lại</button>
        </div>
        <div class="chart-container" style="position: relative; height: 300px; padding: 1rem;">
            <canvas id="reservationsTrendChart" data-reservation-chart></canvas>
            <div data-reservation-chart-empty class="text-center text-muted" style="display: none; padding: 2rem;">
                Chưa có dữ liệu đặt chỗ
            </div>
        </div>
    </div>
</section>

<section class="content-grid">
    <div class="dashboard-panel">
        <div class="panel-header">
            <h3>Bản đồ trạm sạc</h3>
        </div>
        <div id="DashboardMap" class="dashboard-map" data-map-container>
            <div class="placeholder">Bản đồ đang được tải...</div>
        </div>
    </div>
    <div class="dashboard-panel">
        <div class="panel-header">
            <h3>Thông báo mới</h3>
        </div>
        <ul class="notification-list" data-notification-list>
            <li class="notification-item muted">Đang tải thông báo...</li>
        </ul>
    </div>
</section>

@section Scripts {
    <script src="~/js/admin-dashboard.js" asp-append-version="true"></script>
}


